"use strict";(self.webpackChunkgoit_react_hw_08_phonebook=self.webpackChunkgoit_react_hw_08_phonebook||[]).push([[326],{6326:(e,a,n)=>{n.r(a),n.d(a,{default:()=>E});var r=n(8903),t=n(1036),s=n(3892),o=n(3033),l=n(6954),d=n(6946),i=n(8256),c=n(3404),u=n(579);const m=()=>{const{data:e}=(0,l.TE)(),[a,{isLoading:n}]=(0,l.ev)(),r=new RegExp("\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}"),m=(0,s.Wx)({initialValues:{name:"",number:""},validationSchema:o.Ik({name:o.Yj().matches("^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$","Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan").required("Required"),number:o.Yj().matches(r,"Phone number must be digits and can contain spaces, dashes, parentheses and can start with +").max(13).required("Required")}),onSubmit:async n=>{try{if(e.find((e=>e.name.toLocaleLowerCase()===m.values.name.toLocaleLowerCase())))throw new Error("".concat(m.values.name," is already in contacts"));if((await a(n)).error)throw new Error("Failed to add contact");t.oR.success("Contact added successfully"),m.handleReset()}catch(r){t.oR.error(r.message)}}});return(0,u.jsxs)(d.A,{component:"form",onSubmit:m.handleSubmit,sx:{mt:1,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,u.jsx)(i.A,{margin:"normal",required:!0,fullWidth:!0,id:"name",label:"Name",name:"name",value:m.values.name,onChange:m.handleChange,onBlur:m.handleBlur,error:Boolean(m.touched.name&&m.errors.name),helperText:m.touched.name&&m.errors.name}),(0,u.jsx)(i.A,{margin:"normal",required:!0,fullWidth:!0,name:"number",label:"Number",type:"tel",id:"number",value:m.values.number,onChange:m.handleChange,onBlur:m.handleBlur,error:Boolean(m.touched.number&&m.errors.number),helperText:m.touched.number&&m.errors.number}),(0,u.jsx)(c.A,{type:"submit",variant:"contained",sx:{mt:3,mb:2,textAlign:"center"},disabled:n,children:"Add contact"})]})};var h=n(2222),x=n(5043),p=n(5137),A=n(719),g=n(1322),b=n(7392),v=n(8569),j=n(3471);const y=e=>{let{id:a,name:n,number:r}=e;const[s,{isLoading:o,isSuccess:d}]=(0,l.ql)();return(0,x.useEffect)((()=>{d&&t.oR.success("The contact was successfully deleted")}),[d]),(0,u.jsx)(g.Ay,{secondaryAction:(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(b.A,{edge:"end","aria-label":"delete",disabled:o,onClick:()=>s(a),children:(0,u.jsx)(j.A,{})})}),children:(0,u.jsx)(v.A,{primary:n,secondary:r})})};var f=n(5721),C=n(3609);const w=()=>{const{data:e,filteredContacts:a,error:n,isLoading:r}=(()=>{const e=(0,p.d4)(A.vD),a=(0,x.useMemo)((()=>(0,h.Mz)([e=>e.data,(e,a)=>a],((e,a)=>{var n;return null!==(n=null===e||void 0===e?void 0:e.filter((e=>{let{name:n}=e;return n.toLowerCase().includes(a.toLowerCase())})).reverse())&&void 0!==n?n:[]}))),[]);return(0,l.TE)(void 0,{selectFromResult:n=>({...n,filteredContacts:a(n,e)})})})();return r?(0,u.jsx)(C.y,{height:120,width:120}):n?(0,u.jsx)("p",{children:"Failed to load contacts"}):0===(null===e||void 0===e?void 0:e.length)?(0,u.jsx)("p",{children:"No contacts"}):(0,u.jsx)(f.A,{sx:{overflow:"auto",maxHeight:350},children:null===a||void 0===a?void 0:a.map((e=>(0,u.jsx)(y,{...e},e.id)))})},k=()=>{const e=(0,p.d4)(A.vD),a=(0,p.wA)();return(0,u.jsx)(i.A,{fullWidth:!0,id:"standard-search",label:"Search",type:"search",variant:"standard",name:"filter",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan",value:e,onChange:e=>{a((0,A._9)(e.target.value))}})};var z,L,_,B=n(7528),R=n(6253);R.Ay.div(z||(z=(0,B.A)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n"])));const q=R.Ay.h1(L||(L=(0,B.A)(["\n  text-align: center;\n  margin-top: 30px;\n"]))),S=R.Ay.h2(_||(_=(0,B.A)(["\n  margin: 25px 0;\n"]))),E=()=>(0,u.jsxs)("div",{children:[(0,u.jsx)(q,{children:"Phonebook"}),(0,u.jsxs)(r.Ay,{container:!0,direction:"row",justifyContent:"center",alignItems:"flex-start",columnSpacing:12,children:[(0,u.jsxs)(r.Ay,{item:!0,xs:3,children:[(0,u.jsx)(S,{children:"Create contact"}),(0,u.jsx)(m,{})]}),(0,u.jsxs)(r.Ay,{item:!0,xs:3,children:[(0,u.jsx)(S,{children:"Contacts"}),(0,u.jsx)(k,{}),(0,u.jsx)(w,{})]})]})]})}}]);
//# sourceMappingURL=326.3bf134b5.chunk.js.map